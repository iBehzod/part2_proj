Bootstrap: docker
From: ubuntu:20.04

%post
    apt-get update && apt-get install -y \
        build-essential \
        clang \
        cmake \
        libgtest-dev

    cd /usr/src/gtest
    cmake CMakeLists.txt
    make
    cp *.a /usr/lib

    mkdir -p /opt/matrix_multiplication/build
    cd /opt/matrix_multiplication/build
    cmake ..
    make

%files
    . /opt/matrix_multiplication

%environment
    export PATH=/opt/matrix_multiplication/build:$PATH

%labels
    Author iBekhzod

%help
    This is a Singularity container for the matrix multiplication program.

%runscript
    exec /opt/matrix_multiplication/build/main "$@"
